<html>
  <head>
    <!-- <script src="zmusic.asm.js"></script> -->
    <script src="zmusic.js"></script>
    <script>
      // Make XHR to support Promise.
      function xhr (url) {
         return new Promise(function (resolve, reject) {
             var xhr = new XMLHttpRequest();
             xhr.open('GET', url, true);
             xhr.responseType = 'arraybuffer';
             xhr.addEventListener('load', e => {
                 resolve(xhr.response);
                 xhr.abort();
             }, false);
             xhr.send();
         });
      }

      Promise.all([
         ZMUSIC.install(),
         xhr('./test.zms')
      ]).then(results => {
         ZMUSIC.play(results[1]);
      });
    </script>
  </head>
</html>
