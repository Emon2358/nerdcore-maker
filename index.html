<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>ZMUSIC MML Editor</title>
    <script src="dist/zmusic.js"></script>
    <script>
      // Default MML code generated on the site.
      const defaultMml = "; Default MML code\nv12 o5 l8 cdefgab>c";

      // Initialize ZMUSIC and set the textarea with default MML code.
      ZMUSIC.install().then(function() {
        document.getElementById("mml-editor").value = defaultMml;
      }).catch(function(err) {
        console.error("Error during ZMUSIC initialization:", err);
        const errorDiv = document.getElementById("error-message");
        errorDiv.textContent = "Error initializing ZMUSIC: " + err;
      });

      // Function to play the MML code from the textarea.
      function playMml() {
        const mmlCode = document.getElementById("mml-editor").value;
        ZMUSIC.compileAndPlay(mmlCode);
      }
    </script>
  </head>
  <body>
    <h1>ZMUSIC MML Editor</h1>
    <!-- Display error messages if any occur -->
    <div id="error-message" style="color: red;"></div>
    <!-- Textarea for MML code editing -->
    <textarea id="mml-editor" rows="15" cols="60"></textarea>
    <br>
    <!-- Buttons to play MML and unmute audio -->
    <button onclick="playMml()">Play</button>
    <button onclick="ZMUSIC.resume()">Unmute</button>
  </body>
</html>
